<template>
  <div id="topline">
    <div id="logo">
      <span>c</span>
      <span>r</span>
      <span>o</span>
      <span>c</span>
      <span>o</span>
      <span>.</span>
      <span>f</span>
      <span>u</span>
      <span>n</span>
    </div>
    <div id="room-controls">
      <label
        id="theme-switch"
        class="theme-switch"
        for="checkbox_theme"
        title="Свет"
      >
        <svg
          id="moon"
          width="512"
          height="512"
          viewBox="0 0 512 512"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M437.641 75.6166C434.711 72.6679 429.946 72.6508 426.995 75.5794C424.046 78.5091 424.03 83.2754 426.958 86.2251C471.301 130.875 496.052 189.864 496.903 252.652C465.756 254.728 441.046 280.713 441.046 312.376C441.046 334.206 452.705 353.866 471.311 364.409C459.893 387.031 444.812 407.934 426.373 426.373C392.899 459.848 351.304 482.243 306.035 491.754C297.921 471.565 278.256 457.989 255.998 457.989C233.743 457.989 214.086 471.568 205.973 491.757C160.7 482.245 119.102 459.85 85.6249 426.373C40.1177 380.865 15.0547 320.358 15.0547 256C15.0547 215.917 24.78 177.331 43.1075 142.93C56.459 148.72 71.0249 151.764 85.656 151.764C98.2869 151.764 110.654 149.579 122.412 145.269C126.316 143.839 128.32 139.515 126.89 135.611C125.46 131.708 121.135 129.703 117.232 131.134C107.138 134.834 96.5144 136.709 85.657 136.709C73.4607 136.709 61.7251 134.386 50.663 129.8C60.4435 113.953 72.1279 99.1249 85.6269 85.6259C111.55 59.7028 142.346 40.4248 175.942 28.6239C176.912 33.9984 177.41 39.4643 177.41 44.9552C177.41 72.7853 164.98 98.8017 143.307 116.33C140.075 118.945 139.574 123.685 142.188 126.917C143.676 128.757 145.852 129.711 148.046 129.711C149.709 129.711 151.382 129.163 152.775 128.036C177.998 107.634 192.465 77.3519 192.465 44.9552C192.465 37.9207 191.772 30.9173 190.407 24.0523C211.485 18.1268 233.505 15.0547 256 15.0547C310.022 15.0547 361.081 32.5341 403.658 65.6022C406.942 68.1525 411.671 67.5583 414.22 64.2744C416.77 60.9915 416.176 56.2623 412.892 53.712C367.65 18.5734 313.397 0 256 0C187.619 0 123.333 26.6287 74.9802 74.9802C26.6287 123.333 0 187.619 0 256C0 324.38 26.6287 388.667 74.9802 437.019C123.332 485.371 187.619 511.999 256 511.999C324.38 511.999 388.667 485.37 437.019 437.019C485.371 388.667 511.999 324.38 511.999 256C512 187.961 485.592 123.901 437.641 75.6166V75.6166ZM221.247 494.463C227.729 481.538 241.051 473.045 256 473.045C270.949 473.045 284.275 481.536 290.758 494.462C279.344 496.101 267.737 496.945 256 496.945C244.264 496.945 232.659 496.102 221.247 494.463V494.463ZM456.102 312.376C456.102 289.1 473.94 269.918 496.661 267.765C495.28 296.688 488.8 324.674 477.677 350.699C464.378 342.668 456.102 328.291 456.102 312.376V312.376Z"
            fill="#2C3E50"
          />
          <path
            d="M324.86 240.78C324.753 240.777 324.646 240.773 324.538 240.774C320.404 240.774 317.039 244.112 317.012 248.252C316.986 252.375 320.279 255.746 324.389 255.827C324.514 255.831 324.639 255.834 324.765 255.834C360.709 255.834 389.952 226.592 389.952 190.647C389.952 154.703 360.71 125.461 324.765 125.461C288.821 125.461 259.578 154.703 259.578 190.647C259.578 212.973 270.826 233.503 289.667 245.567C293.164 247.807 297.821 246.788 300.065 243.286C302.306 239.785 301.285 235.13 297.784 232.888C283.288 223.606 274.633 207.816 274.633 190.647C274.633 163.005 297.122 140.515 324.765 140.515C352.409 140.515 374.897 163.004 374.897 190.647C374.895 218.258 352.458 240.728 324.86 240.78V240.78Z"
            fill="#2C3E50"
          />
          <path
            d="M156.436 345.593C178.888 345.593 197.152 327.327 197.152 304.877C197.152 282.426 178.886 264.161 156.436 264.161C133.985 264.161 115.72 282.426 115.72 304.877C115.72 327.327 133.984 345.593 156.436 345.593ZM156.436 279.216C170.586 279.216 182.097 290.728 182.097 304.877C182.097 319.026 170.585 330.538 156.436 330.538C142.287 330.538 130.775 319.026 130.775 304.877C130.775 290.728 142.286 279.216 156.436 279.216Z"
            fill="#2C3E50"
          />
          <path
            d="M94.8353 192.268C79.5147 192.268 67.0494 204.732 67.0494 220.054C67.0494 235.376 79.5137 247.84 94.8353 247.84C110.157 247.84 122.621 235.376 122.621 220.054C122.621 204.732 110.156 192.268 94.8353 192.268ZM94.8353 232.784C87.8158 232.784 82.1041 227.073 82.1041 220.053C82.1041 213.032 87.8148 207.322 94.8353 207.322C101.856 207.322 107.567 213.032 107.567 220.053C107.567 227.073 101.855 232.784 94.8353 232.784Z"
            fill="#2C3E50"
          />
          <path
            d="M315.962 422.809C336.821 422.809 353.791 405.84 353.791 384.981C353.791 364.122 336.821 347.152 315.962 347.152C295.103 347.152 278.134 364.122 278.134 384.981C278.134 405.84 295.103 422.809 315.962 422.809V422.809ZM315.962 362.207C328.52 362.207 338.736 372.423 338.736 384.981C338.736 397.538 328.52 407.754 315.962 407.754C303.405 407.754 293.189 397.538 293.189 384.981C293.189 372.423 303.405 362.207 315.962 362.207Z"
            fill="#2C3E50"
          />
          <path
            d="M399.864 305.34C399.864 289.375 386.876 276.385 370.911 276.385C354.946 276.385 341.957 289.374 341.957 305.34C341.957 321.306 354.945 334.294 370.911 334.294C386.876 334.294 399.864 321.305 399.864 305.34ZM357.011 305.34C357.011 297.676 363.246 291.44 370.911 291.44C378.575 291.44 384.809 297.675 384.809 305.34C384.809 313.004 378.575 319.239 370.911 319.239C363.247 319.239 357.011 313.003 357.011 305.34Z"
            fill="#2C3E50"
          />
          <path
            class="moon-shades"
            d="M391 190.5C391 226.675 361.675 256 325.5 256C289.325 256 260 226.675 260 190.5C260 154.325 289.325 125 325.5 125C361.675 125 391 154.325 391 190.5Z"
            fill="none"
          />
          <ellipse
            class="moon-shades"
            cx="156.5"
            cy="305"
            rx="40.5"
            ry="41"
            fill="none"
          />
          <circle class="moon-shades" cx="316" cy="385" r="38" fill="none" />
          <circle
            class="moon-shades"
            cx="86.5"
            cy="45.5"
            r="106.5"
            fill="none"
          />
          <circle class="moon-shades" cx="256" cy="513" r="55" fill="none" />
          <circle
            class="moon-shades"
            cx="503.5"
            cy="311.5"
            r="62.5"
            fill="none"
          />
          <circle class="moon-shades" cx="95" cy="220" r="25" fill="none" />
          <circle
            class="moon-shades"
            cx="370.5"
            cy="305.5"
            r="29.5"
            fill="none"
          />
        </svg>

        <svg
          id="sun"
          width="512"
          height="512"
          viewBox="0 0 512 512"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M256 103.443C221.402 103.443 188.78 114.736 161.661 136.101C158.305 138.745 157.728 143.61 160.372 146.967C163.016 150.323 167.881 150.899 171.238 148.256C195.601 129.062 224.911 118.917 256 118.917C331.588 118.917 393.084 180.412 393.084 256.001C393.084 331.59 331.588 393.084 256 393.084C180.412 393.084 118.916 331.589 118.916 256C118.916 224.49 129.308 194.87 148.97 170.338C151.642 167.004 151.105 162.135 147.771 159.462C144.437 156.789 139.567 157.326 136.896 160.661C115.323 187.578 103.442 221.437 103.442 256.001C103.442 340.121 171.879 408.558 255.999 408.558C340.119 408.558 408.557 340.12 408.557 256C408.557 171.88 340.12 103.443 256 103.443Z"
            fill="#FAFAFA"
          />
          <path
            d="M256 0C251.727 0 248.263 3.463 248.263 7.737V49.112C248.263 53.386 251.727 56.849 256 56.849C260.273 56.849 263.737 53.386 263.737 49.112V7.737C263.737 3.463 260.273 0 256 0Z"
            fill="#FAFAFA"
          />
          <path
            d="M159.256 72.962L138.569 37.131C136.433 33.43 131.702 32.165 128 34.299C124.3 36.435 123.032 41.167 125.168 44.868L145.855 80.699C147.288 83.181 149.889 84.568 152.562 84.568C153.874 84.568 155.205 84.234 156.423 83.53C160.125 81.394 161.393 76.662 159.256 72.962Z"
            fill="#FAFAFA"
          />
          <path
            d="M80.698 145.856L44.866 125.169C41.166 123.034 36.434 124.299 34.297 128.001C32.161 131.701 33.428 136.433 37.129 138.57L72.961 159.257C74.179 159.96 75.51 160.295 76.822 160.295C79.496 160.295 82.096 158.908 83.529 156.426C85.668 152.724 84.399 147.993 80.698 145.856Z"
            fill="#FAFAFA"
          />
          <path
            d="M49.112 248.263H7.737C3.464 248.263 0 251.726 0 256C0 260.274 3.464 263.737 7.737 263.737H49.113C53.386 263.737 56.85 260.274 56.85 256C56.85 251.726 53.385 248.263 49.112 248.263Z"
            fill="#FAFAFA"
          />
          <path
            d="M83.53 355.575C81.394 351.875 76.663 350.609 72.961 352.743L37.13 373.431C33.43 375.567 32.162 380.299 34.298 384C35.731 386.482 38.331 387.869 41.005 387.869C42.317 387.869 43.648 387.535 44.866 386.831L80.698 366.144C84.399 364.007 85.667 359.276 83.53 355.575Z"
            fill="#FAFAFA"
          />
          <path
            d="M156.425 428.47C152.725 426.335 147.993 427.6 145.856 431.302L125.169 467.134C123.033 470.834 124.3 475.566 128.001 477.702C129.219 478.406 130.55 478.74 131.862 478.74C134.536 478.74 137.136 477.353 138.569 474.871L159.256 439.039C161.393 435.338 160.125 430.606 156.425 428.47Z"
            fill="#FAFAFA"
          />
          <path
            d="M256 455.152C251.727 455.152 248.263 458.615 248.263 462.889V504.264C248.263 508.538 251.727 512.001 256 512.001C260.273 512.001 263.737 508.538 263.737 504.264V462.889C263.737 458.615 260.273 455.152 256 455.152Z"
            fill="#FAFAFA"
          />
          <path
            d="M386.831 467.134L366.144 431.302C364.008 427.601 359.276 426.336 355.575 428.47C351.875 430.606 350.607 435.338 352.743 439.038L373.43 474.87C374.863 477.352 377.464 478.739 380.137 478.739C381.449 478.739 382.78 478.405 383.998 477.701C387.7 475.566 388.968 470.834 386.831 467.134Z"
            fill="#FAFAFA"
          />
          <path
            d="M474.87 373.431L439.038 352.744C435.338 350.609 430.606 351.874 428.469 355.576C426.333 359.276 427.6 364.008 431.301 366.145L467.133 386.832C468.351 387.536 469.682 387.87 470.994 387.87C473.668 387.87 476.268 386.483 477.701 384.001C479.839 380.299 478.571 375.567 474.87 373.431Z"
            fill="#FAFAFA"
          />
          <path
            d="M504.263 248.263H462.887C458.614 248.263 455.15 251.726 455.15 256C455.15 260.274 458.614 263.737 462.887 263.737H504.263C508.536 263.737 512 260.274 512 256C512 251.726 508.536 248.263 504.263 248.263Z"
            fill="#FAFAFA"
          />
          <path
            d="M477.702 128C475.566 124.299 470.834 123.034 467.134 125.168L431.302 145.855C427.602 147.991 426.334 152.723 428.47 156.424C429.903 158.906 432.503 160.293 435.177 160.293C436.489 160.293 437.82 159.959 439.038 159.255L474.87 138.568C478.571 136.433 479.838 131.701 477.702 128Z"
            fill="#FAFAFA"
          />
          <path
            d="M384 34.299C380.3 32.164 375.568 33.429 373.431 37.131L352.744 72.962C350.608 76.661 351.875 81.393 355.576 83.531C356.794 84.234 358.125 84.569 359.437 84.569C362.111 84.569 364.711 83.182 366.144 80.7L386.831 44.869C388.968 41.167 387.7 36.435 384 34.299Z"
            fill="#FAFAFA"
          />
          <circle class="sun-shades" cx="256" cy="256" r="153" fill="none" />
        </svg>

        <input type="checkbox" id="checkbox_theme" />
      </label>
      <div id="status" @click="changeRoomStatus()" :class="getStatus">
        {{ getJoined }}
      </div>
      <div id="out" @click="leaveRoom()">
        <!-- <img src="@/assets/img/out.svg" alt="Выйти"> -->
        <!-- <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M255.15 468.625H63.787C52.05 468.625 42.525 459.099 42.525 447.363V64.638C42.525 52.901 52.051 43.376 63.787 43.376H255.15C266.908 43.376 276.412 33.872 276.412 22.114C276.412 10.356 266.908 0.850006 255.15 0.850006H63.787C28.619 0.850006 0 29.47 0 64.638V447.362C0 482.53 28.619 511.149 63.787 511.149H255.15C266.908 511.149 276.412 501.645 276.412 489.887C276.412 478.129 266.908 468.625 255.15 468.625Z" fill="#FAFAFA"/>
            <path d="M505.664 240.861L376.388 113.286C368.053 105.036 354.573 105.143 346.323 113.499C338.073 121.855 338.158 135.314 346.536 143.564L438.921 234.737H191.362C179.604 234.737 170.1 244.241 170.1 255.999C170.1 267.757 179.604 277.262 191.362 277.262H438.921L346.536 368.435C338.159 376.685 338.095 390.144 346.323 398.5C350.49 402.71 355.976 404.836 361.462 404.836C366.863 404.836 372.263 402.795 376.388 398.712L505.664 271.137C509.704 267.14 512 261.696 512 255.998C512 250.302 509.725 244.88 505.664 240.861Z" fill="#FAFAFA"/>
          </svg> -->
        <svg
          width="64"
          height="64"
          viewBox="0 0 64 64"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M55.2036 31.3047L49.2036 25.3057C48.8208 24.9229 48.1978 24.9229 47.8149 25.3057C47.4312 25.6895 47.4312 26.3106 47.8149 26.6944L52.1214 31H31.5093V33H52.1198L47.8149 37.3057C47.4312 37.6895 47.4312 38.3106 47.8149 38.6944C48.0063 38.8858 48.2583 38.9815 48.5093 38.9815C48.7603 38.9815 49.0122 38.8858 49.2036 38.6944L55.2036 32.6934C55.3872 32.5088 55.4907 32.2598 55.4907 31.9991C55.4907 31.7383 55.3872 31.4893 55.2036 31.3047Z"
            fill="white"
          />
          <path
            d="M43.5093 41C42.9565 41 42.5093 41.4473 42.5093 42V58.5684C42.5093 59.9151 41.2134 62 40.3765 62H13.0796C12.1431 62 10.5093 59.8194 10.5093 58.5684V4.501C10.5093 3.4258 11.9741 2 13.0796 2H40.3872C42.3862 2 42.3901 2.9444 42.3911 3.2549C42.4126 8.9805 42.4976 20.3457 42.4976 20.3457L44.4976 20.3301C44.4976 20.3301 44.4126 8.9707 44.3911 3.2471C44.3843 1.2442 42.8501 0 40.3872 0H13.0796C10.8589 0 8.50931 2.3135 8.50931 4.501V58.5684C8.50931 60.6114 10.7231 64 13.0796 64H40.3765C42.8052 64 44.5093 60.4766 44.5093 58.5684V42C44.5093 41.4473 44.062 41 43.5093 41Z"
            fill="white"
          />
        </svg>
      </div>
    </div>
  </div>
</template>

<script>
import { mapGetters } from "vuex";

export default {
  data() {
    return {};
  },
  name: "Topline",
  computed: {
    ...mapGetters([
      "getJoined",
      "getRoomSize",
      "getKey",
      "getStatus",
      "getRoomMinutes",
      "getRoomSeconds",
      "getRoomRestTime"
    ])
  },
  methods: {
    leaveRoom: function() {
      this.$router.push("/");
    },
    changeRoomStatus: function() {
      this.$socket.emit("change_status", this.getJoined, data => {
        if (data) {
          this.$toast(`Статус комнаты изменен`, {
            timeout: 1000,
            type: "success", // default info success warning error
            position: "bottom-right"
          });
        } else {
          var textArea = document.createElement("textarea");
          textArea.value = this.getJoined;
          document.body.appendChild(textArea);
          textArea.focus();
          textArea.select();
          try {
            var successful = document.execCommand("copy");
            console.log(successful);
            if (successful) {
              this.$toast(`Ключ скопирован`, {
                timeout: 1000,
                type: "info", // default info success warning error
                position: "bottom-right"
              });
            }
          } catch (err) {
            console.log("Oops, unable to copy");
          }

          document.body.removeChild(textArea);
        }
      });
    }
  }
};
</script>

<style lang="scss" scoped>
#topline {
  position: fixed;
  width: 100vw !important;
  top: 0;
  z-index: 3;
  background: var(--background-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
  padding: 0 8px;
  width: 100%;
  transition: all ease 0.5s;

  #logo span {
    font-family: "Montserat-Light", "Poppins", "Raleway-Light", sans-serif;
    &:nth-child(1) {
      color: var(--orange);
    }
    &:nth-child(2) {
      color: var(--green);
    }
    &:nth-child(3) {
      color: var(--blue);
    }
    &:nth-child(4) {
      color: var(--red);
    }
    &:nth-child(5) {
      color: var(--yellow);
    }
    &:nth-child(6) {
      color: var(--secondary-color); //#655;
    }
    &:nth-child(7) {
      color: var(--pink);
    }
    &:nth-child(8) {
      color: var(--light-blue);
    }
    &:nth-child(9) {
      color: var(--purple);
    }
  }

  #time {
    font-weight: 200;
    color: var(--secondary-color);
    align-self: center;
    user-select: none;
    font-family: "Poppins", "Raleway", sans-serif;
  }

  #room-controls {
    display: flex;
    align-items: center;
    user-select: none;

    #theme-switch {
      display: flex;
      position: relative;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease-out;

      &:hover {
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);

        svg .moon-shades {
          animation: hover_moon 0.5s ease forwards;
        }

        svg .sun-shades {
          animation: hover_sun 0.5s ease forwards;
        }
      }

      svg {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        .sun-shades {
          fill: transparent;
          transition: all 0.5s ease;
        }
        .moon-shades {
          transition: all 0.5s ease;
          fill: transparent;
        }
      }

      input {
        display: none;
      }
    }

    #out {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease-out;
      color: var(--text-color);

      svg {
        width: 25px;
        height: 25px;

        path {
          fill: var(--text-color);
        }
      }

      &:hover {
        svg path {
          transition: fill 0.3s ease-out;
          fill: var(--red);
        }

        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      }
    }

    #status {
      user-select: none;
      // border-radius: 4px;
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.3s ease-out;
      font-family: "Raleway-Light", "Poppins", sans-serif;

      &.private {
        border-bottom: 2px solid var(--red);
        // background: var(--red);

        &:hover {
          // background: var(--green);
          border-bottom: 2px solid var(--green);
          box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
      }

      &.public {
        // background: var(--green);
        border-bottom: 2px solid var(--green);

        &:hover {
          // background: var(--red);
          border-bottom: 2px solid var(--red);
          box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
      }
    }
  }
}

@media screen and (min-width: 425px) {
  #topline {
    height: 40px;

    #logo {
      font-size: 2em;
    }

    #time {
      font-size: 1.3em;
      padding: 0 5px;
      height: 40px;
      line-height: 40px;
    }

    #out {
      width: 30px;
      height: 30px;
      line-height: 30px;
      font-size: 1.5em;
      margin-left: 10px;
    }

    #status {
      height: 30px;
      line-height: 30px;
      font-size: 1.2em;
      padding: 0 0px;
      margin-left: 10px;
    }

    #theme-switch {
      width: 30px;
      height: 30px;

      svg {
        border-radius: 50%;
        width: 22px;
        height: 22px;
      }
    }
  }
}

@media screen and (max-width: 425px) {
  #topline {
    height: 30px;

    #logo {
      height: 30px;
      line-height: 30px;
      font-size: 1.5em;
    }

    #time {
      font-size: 20px;
      padding: 0;
      height: 30px;
      line-height: 35px;
    }

    #status {
      height: 25px;
      line-height: 25px;
      font-size: 0.9em;
      padding: 0px 5px;
      margin-left: 5px;
    }

    #out {
      width: 20px;
      height: 20px;
      padding: 0;
      line-height: 20px;
      margin-left: 5px;
    }

    #theme-switch {
      width: 25px;
      height: 25px;

      svg {
        width: 20px;
        height: 20px;
      }
    }
  }
}
</style>
